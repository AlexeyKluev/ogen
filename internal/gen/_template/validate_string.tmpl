{{ define "validate_string" }}
{{- /*Variables*/}}
{{- $schema := index . "schema" }}
{{- $varname := index . "varname" }}
{{- if index . "ptr" }}{{ $varname = sprintf "*%s" $varname }}{{ end }}
{{- $errorPrefix := index . "errorPrefix" }}
{{- if not $errorPrefix }}{{ $errorPrefix = "" }}{{ end }}
{{- /*Variables*/}}

{{- if and (eq $schema.Kind "primitive") (eq $schema.Primitive "string") }}
{{- if $schema.MinLength }}{{/*MinLength*/}}
if len([]rune({{ $varname }})) < {{ $schema.MinLength }} {
    return fmt.Errorf("{{ $errorPrefix }}string must contain at least {{ $schema.MinLength }} characters")
}
{{- end }}{{/*MinLength*/}}
{{- if $schema.MaxLength }}{{/*MaxLength*/}}
if len([]rune({{ $varname }})) > {{ $schema.MaxLength }} {
    return fmt.Errorf("{{ $errorPrefix }}string must contain at most {{ $schema.MaxLength }} characters")
}
{{- end }}{{/*MaxLength*/}}
{{- end }}
{{- end }}